# Scratchpad - Work Phase (archived 20250901-2150)

**NOTES:

- All To Do items should be added as checklists.
- Do not check something off unless you're confident it's complete.
- Reorganize now and then, putting unfinished tasks at the top and finished ones at the bottom.
  **

      ## Current Story

  Story 003 — Snapshot tool

## Current Task

Sketch and implement snapshot builder (sections, toc, tails, anchors, commit)

## Plan Checklist

- [ ] Create `src/snapshot.ts` with API `buildSnapshot(slug)`
- [ ] Implement section parsing, anchor extraction
- [ ] Build `toc` and `per_section_tail` (default 10)
- [ ] Integrate with git to get `current_commit`
- [ ] Wire date/tz to return `date_local` and `tz`
- [ ] Add tests with example vault file

## Issues/Blockers

- [ ] Choose tail size via env `SNAPSHOT_TAIL` with default 10

## Recently Completed

- [x] Story 002 — Vault resolver + safe path sandbox

## Decisions Made

- [ ] Preserve existing section order strictly

## Lessons Learned

- [ ] Avoid reading whole files when not needed; prefer tails

Keep this file concise (<300 lines): summarize or remove outdated info regularly to prevent overloading the context. Focus on the current phase and immediate next steps.
